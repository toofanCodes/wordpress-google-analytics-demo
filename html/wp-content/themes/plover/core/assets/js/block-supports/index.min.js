(()=>{"use strict";const e=window.React,o=window.wp.hooks,r=window.wp.compose,t=window.wp.element,l=window.wp.data,c=window.wp.blocks;function s(e){var o,r,t="";if("string"==typeof e||"number"==typeof e)t+=e;else if("object"==typeof e)if(Array.isArray(e)){var l=e.length;for(o=0;o<l;o++)e[o]&&(r=s(e[o]))&&(t&&(t+=" "),t+=r)}else for(r in e)e[r]&&(t&&(t+=" "),t+=r);return t}const p=function(){for(var e,o,r=0,t="",l=arguments.length;r<l;r++)(e=arguments[r])&&(o=s(e))&&(t&&(t+=" "),t+=o);return t},i=window.plover.data,n=window.plover.utils;(0,o.addFilter)("blocks.registerBlockType","plover/block-supports",((e,o)=>(Object.keys((0,n.blockSupports)()).includes(o)&&(e.supports=(0,n.deepMerge)(e.supports,(0,n.blockSupports)()[o])),e)),0),(0,o.addFilter)("editor.BlockListBlock","plover/with-block-gap-css",(0,r.createHigherOrderComponent)((r=>t=>{var l,c;const{name:s}=t,p=(0,o.applyFilters)("plover.blocksWithBlockGap",["plover-kit/toc","plover-docs/doc-list","core/page-list","core/list","core/button","core/post-author","core/tag-cloud","core/read-more"]),i=(0,e.createElement)(r,{...t});if(!p.includes(s))return i;const a=null!==(l=t?.attributes?.style?.spacing?.blockGap)&&void 0!==l?l:"";if(!a)return i;const k={...(t={...t,style:{...null!==(c=t.style)&&void 0!==c?c:{},"--plover--style--block-gap":(0,n.formatCustomProperty)(a)}}).wrapperProps,style:{...t.wrapperProps?.style,"--plover--style--block-gap":(0,n.formatCustomProperty)(a)}};return(0,e.createElement)(r,{...t,wrapperProps:k})}),"withBlockGapCss")),(0,o.addFilter)("blocks.registerBlockType","plover/unique-block-id",((e,o)=>(e.attributes={...e.attributes,ploverBlockID:{type:"string"}},e))),(0,o.addFilter)("editor.BlockListBlock","plover/with-unique-block-id",(0,r.createHigherOrderComponent)((o=>r=>{const{name:s,clientId:a,attributes:k,setAttributes:d}=r,{addBlock:u,removeBlock:v}=(0,l.useDispatch)(i.ploverBlocksStore),{getBlock:w,getBlockParents:B,getPloverBlock:b}=(0,l.useSelect)((e=>({...e(i.blockEditorStore),getPloverBlock:e(i.ploverBlocksStore).getBlock})),[]);(0,t.useEffect)((()=>{var e,o;const r=null!==(e=w(a))&&void 0!==e?e:{},t={...r,attributes:{...r?.attributes,ploverBlockID:void 0}};if((0,c.isUnmodifiedDefaultBlock)(t)||(0,n.isSyncedBlock)(r))return void(k?.ploverBlockID&&(v(k?.ploverBlockID),d({ploverBlockID:void 0})));if((null!==(o=B(a))&&void 0!==o?o:[]).some((e=>(0,n.isSyncedBlock)(w(e)))))return;const l=b(k?.ploverBlockID);!k?.ploverBlockID||l?l?.clientId!==a&&d({ploverBlockID:a}):u(k?.ploverBlockID,r)}),[a,s,k]);const f={...r?.wrapperProps,className:p(r?.wrapperProps?.className,`plover-block-${k?.ploverBlockID}`)};return(0,e.createElement)(o,{...r,wrapperProps:f})}),"withBlockID"))})();