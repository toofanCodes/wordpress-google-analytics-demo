(()=>{"use strict";const e=window.React,t=window.wp.hooks,l=window.plover.utils,r=window.wp.blockEditor,n=window.wp.element,o=window.wp.richText,i=({attributes:i,...a})=>{const s=(0,n.useRef)(null),h=(0,t.applyFilters)("plover.highlight.previewWrapProps",(0,r.useBlockProps)({className:(0,t.applyFilters)("plover.highlight.previewClassnames",{[`plover-prism prism-${i.theme}-theme`]:!0,[`language-${i.language}`]:!0},i)}),i);return(0,n.useEffect)((()=>{s&&s.current&&window.Prism&&window.Prism.highlightElement(s.current,!1)}),[s,i?.content,i.theme]),(0,t.applyFilters)("plover.highlight.previewBlockEdit",(0,e.createElement)("pre",{...h},(0,e.createElement)("code",{ref:s},(0,l.isString)(i?.content)?(0,e.createElement)(n.RawHTML,null,i?.content):(0,o.getTextContent)(i?.content))),{attributes:i,blockWrapProps:h,...a})};function a({BlockEdit:t,...l}){const{attributes:n}=l,o=(0,r.useBlockProps)().className.split(" ").filter((e=>e.startsWith("align"))).join(" ");return(0,e.createElement)("div",{className:`prism-${n.theme}-theme ${o}`},(0,e.createElement)(t,{...l}))}const s=window.wp.components,h=window.wp.i18n,g=window.plover.components,p=({attributes:n,setAttributes:o})=>{const i=(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s.__experimentalToggleGroupControl,{isBlock:!0,label:(0,h.__)("Style","plover"),value:n.highlight,onChange:e=>{o({highlight:e})}},(0,e.createElement)(s.__experimentalToggleGroupControlOption,{value:"highlight",label:(0,h.__)("Highlight","plover")}),(0,e.createElement)(s.__experimentalToggleGroupControlOption,{value:"none",label:(0,h.__)("None","plover")})),"highlight"===n.highlight&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s.SelectControl,{label:(0,h.__)("Theme","plover"),value:n.theme,options:(0,l.getExtensionSetting)("highlight","support_themes",[]),onChange:e=>o({theme:e}),__nextHasNoMarginBottom:!0}),(0,e.createElement)(s.SelectControl,{label:(0,h.__)("Language","plover"),value:n.language,options:(0,l.getExtensionSetting)("highlight","support_languages",[]),onChange:e=>o({language:e}),__nextHasNoMarginBottom:!0})));return(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(s.PanelBody,null,(0,t.applyFilters)("plover.highlight.InspectorControls",i,n,o),!(0,l.is_premium)()&&(0,e.createElement)(g.Tips,null,(0,e.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,h.sprintf)(/* translators: %s is the premium text and link. */ /* translators: %s is the premium text and link. */
(0,h.__)("Upgrade to %s to access these features:","plover"),'<a class="accent" href="'+(0,l.upsell_url)()+'">'+(0,h.__)("Premium","plover")+"</a>")}}),(0,e.createElement)("ul",null,(0,e.createElement)("li",null,(0,e.createElement)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-highlight/#show-line-numbers",target:"_blank"},(0,h.__)("Show line numbers by default","plover"))),(0,e.createElement)("li",null,(0,e.createElement)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-highlight/#show-language",target:"_blank"},(0,h.__)("Show languages by default","plover"))),(0,e.createElement)("li",null,(0,e.createElement)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-highlight/#show-copy-button",target:"_blank"},(0,h.__)("Show copy button by default","plover"))),(0,e.createElement)("li",null,(0,e.createElement)("a",{href:"https://wpplover.com/docs/plover-kit/modules/code-highlight/#themes-preview",target:"_blank"},(0,h.__)("More highlight themes","plover")))),(0,e.createElement)("div",null,(0,e.createElement)(s.Button,{href:(0,l.upsell_url)(),target:"_blank",variant:"primary"},(0,h.__)("Upgrade Now â†—","plover"))))))},c={highlight:{type:"string",default:"highlight"},theme:{type:"string",default:"github-copilot"},language:{type:"string",default:"clike"}};(0,t.addFilter)("blocks.registerBlockType","plover/highlight-attributes",((e,t)=>("core/code"===t&&(e.attributes={...e.attributes,...(0,l.getExtensionSetting)("highlight","attributes",c)}),e))),(0,t.addFilter)("editor.BlockEdit","plover/highlight-controls",(t=>l=>{const{attributes:r,isSelected:n,name:o}=l;return"core/code"!==o?(0,e.createElement)(t,{...l}):(0,e.createElement)(e.Fragment,null,"none"===r.highlight?(0,e.createElement)(t,{...l}):n?(0,e.createElement)(a,{BlockEdit:t,...l}):(0,e.createElement)(i,{...l}),(0,e.createElement)(p,{...l}))}))})();