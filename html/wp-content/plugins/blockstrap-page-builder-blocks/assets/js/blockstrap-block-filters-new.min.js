const{addFilter}=wp.hooks;const blockstrapBlocksFilterBlocks=settings=>{blockstrap_blocks_add_editor_compat_class();if(settings.name!=="core/post-template"){return settings}var external_wp_blockEditor_namespaceObject=window["wp"]["blockEditor"];var external_wp_element_namespaceObject=window["wp"]["element"];var external_wp_components_namespaceObject=window["wp"]["components"];var external_wp_i18n_namespaceObject=window["wp"]["i18n"];var external_wp_blockEditor_namespaceObject=window["wp"]["blockEditor"];var external_wp_serverSideRender_namespaceObject=window["wp"]["serverSideRender"];var external_wp_url_namespaceObject=window["wp"]["url"];var external_wp_coreData_namespaceObject=window["wp"]["coreData"];var external_wp_data_namespaceObject=window["wp"]["data"];var external_wp_blocks_namespaceObject=window["wp"]["blocks"];var external_wp_element_namespaceObject=window["wp"]["element"];var external_wp_primitives_namespaceObject=window["wp"]["primitives"];function PostTemplateBlockPreview({blocks,blockContextId,isHidden,setActiveBlockContextId}){const blockPreviewProps=(0,external_wp_blockEditor_namespaceObject.__experimentalUseBlockPreview)({blocks:blocks,props:{className:"wp-block-post"}});const handleOnClick=()=>{setActiveBlockContextId(blockContextId)};const style={display:isHidden?"none":undefined};return(0,external_wp_element_namespaceObject.createElement)("li",{...blockPreviewProps,tabIndex:0,role:"button",onClick:handleOnClick,onKeyPress:handleOnClick,style:style})}const MemoizedPostTemplateBlockPreview=(0,external_wp_element_namespaceObject.memo)(PostTemplateBlockPreview);const post_template_edit_TEMPLATE=[["core/post-title"],["core/post-date"],["core/post-excerpt"]];function PostTemplateInnerBlocks(){const innerBlocksProps=(0,external_wp_blockEditor_namespaceObject.useInnerBlocksProps)({className:"wp-block-post col mb-4"},{template:post_template_edit_TEMPLATE,__unstableDisableLayoutClassNames:true});return(0,external_wp_element_namespaceObject.createElement)("li",{...innerBlocksProps})}const newSettings={...settings,edit(_ref2){let{setAttributes,clientId,context:{query:{perPage,offset=0,postType,order,orderBy,author,search,exclude,sticky,inherit,taxQuery,parents,pages,...restQueryArgs}={},queryContext=[{page:1}],templateSlug,previewPostType},attributes:{layout},__unstableLayoutClassNames}=_ref2;const{type:layoutType,columnCount=3}=layout||{};const[{page}]=queryContext;const[activeBlockContextId,setActiveBlockContextId]=(0,external_wp_element_namespaceObject.useState)();const{posts,blocks}=(0,external_wp_data_namespaceObject.useSelect)(select=>{const{getEntityRecords,getTaxonomies}=select(external_wp_coreData_namespaceObject.store);const{getBlocks}=select(external_wp_blockEditor_namespaceObject.store);const taxonomies=getTaxonomies({type:postType,per_page:-1,context:"view"});const templateCategory=inherit&&templateSlug?.startsWith("category-")&&getEntityRecords("taxonomy","category",{context:"view",per_page:1,_fields:["id"],slug:templateSlug.replace("category-","")});const query={offset:perPage?perPage*(page-1)+offset:0,order:order,orderby:orderBy};if(taxQuery&&!inherit){const builtTaxQuery=Object.entries(taxQuery).reduce((accumulator,[taxonomySlug,terms])=>{const taxonomy=taxonomies?.find(({slug})=>slug===taxonomySlug);if(taxonomy?.rest_base){accumulator[taxonomy?.rest_base]=terms}return accumulator},{});if(!!Object.keys(builtTaxQuery).length){Object.assign(query,builtTaxQuery)}}if(perPage){query.per_page=perPage}if(author){query.author=author}if(search){query.search=search}if(exclude?.length){query.exclude=exclude}if(parents?.length){query.parent=parents}if(sticky){query.sticky=sticky==="only"}if(inherit){if(templateSlug?.startsWith("archive-")){query.postType=templateSlug.replace("archive-","");postType=query.postType}else if(templateCategory){query.categories=templateCategory[0]?.id}}const usedPostType=previewPostType||postType;return{posts:getEntityRecords("postType",usedPostType,{...query,...restQueryArgs}),blocks:getBlocks(clientId)}},[perPage,page,offset,order,orderBy,clientId,author,search,postType,exclude,sticky,inherit,templateSlug,taxQuery,parents,restQueryArgs,previewPostType]);const blockContexts=(0,external_wp_element_namespaceObject.useMemo)(()=>posts?.map(post=>({postType:post.type,postId:post.id})),[posts]);let colCount=layoutType==="grid"?columnCount:1;let colMd=" row-cols-md-"+colCount;let colSm=" row-cols-sm-"+colCount>1?colCount-1:colCount;let rowClass="row aaa list-unstyled row-cols-1"+colSm+colMd;const blockProps=(0,external_wp_blockEditor_namespaceObject.useBlockProps)({className:rowClass});if(!posts){return(0,external_wp_element_namespaceObject.createElement)("p",{...blockProps},(0,external_wp_element_namespaceObject.createElement)(external_wp_components_namespaceObject.Spinner,null))}if(!posts.length){return(0,external_wp_element_namespaceObject.createElement)("p",{...blockProps}," ",(0,external_wp_i18n_namespaceObject.__)("No results found."))}const setDisplayLayout=newDisplayLayout=>setAttributes({layout:{...layout,...newDisplayLayout}});const list=(0,external_wp_element_namespaceObject.createElement)(external_wp_primitives_namespaceObject.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,external_wp_element_namespaceObject.createElement)(external_wp_primitives_namespaceObject.Path,{d:"M4 4v1.5h16V4H4zm8 8.5h8V11h-8v1.5zM4 20h16v-1.5H4V20zm4-8c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2z"}));var library_list=list;const grid=(0,external_wp_element_namespaceObject.createElement)(external_wp_primitives_namespaceObject.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,external_wp_element_namespaceObject.createElement)(external_wp_primitives_namespaceObject.Path,{d:"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z",fillRule:"evenodd",clipRule:"evenodd"}));var library_grid=grid;const displayLayoutControls=[{icon:library_list,title:(0,external_wp_i18n_namespaceObject.__)("List view"),onClick:()=>setDisplayLayout({type:"default"}),isActive:layoutType==="default"||layoutType==="constrained"},{icon:library_grid,title:(0,external_wp_i18n_namespaceObject.__)("Grid view"),onClick:()=>setDisplayLayout({type:"grid",columnCount:columnCount}),isActive:layoutType==="grid"}];return(0,external_wp_element_namespaceObject.createElement)(external_wp_element_namespaceObject.Fragment,null,(0,external_wp_element_namespaceObject.createElement)(external_wp_blockEditor_namespaceObject.BlockControls,null,(0,external_wp_element_namespaceObject.createElement)(external_wp_components_namespaceObject.ToolbarGroup,{controls:displayLayoutControls})),(0,external_wp_element_namespaceObject.createElement)("ul",{...blockProps},blockContexts&&blockContexts.map(blockContext=>(0,external_wp_element_namespaceObject.createElement)(external_wp_blockEditor_namespaceObject.BlockContextProvider,{key:blockContext.postId,value:blockContext},blockContext.postId===(activeBlockContextId||blockContexts[0]?.postId)?(0,external_wp_element_namespaceObject.createElement)(PostTemplateInnerBlocks,null):null,(0,external_wp_element_namespaceObject.createElement)(MemoizedPostTemplateBlockPreview,{blocks:blocks,blockContextId:blockContext.postId,setActiveBlockContextId:setActiveBlockContextId,isHidden:blockContext.postId===(activeBlockContextId||blockContexts[0]?.postId)})))))},save(props){return settings.save(props)}};return newSettings};addFilter("blocks.registerBlockType","blockstrap-blocks/blockstrap-blocks-filter-blocks",blockstrapBlocksFilterBlocks);function blockstrap_blocks_add_editor_compat_class(){jQuery(".edit-post-visual-editor").addClass("bsui")}function blockstrap_blocks_remove_gloabl_styles(){wp.hooks.removeFilter("editor.BlockEdit","core/edit-site/push-changes-to-global-styles")}blockstrap_blocks_remove_gloabl_styles();wp.domReady(function(){blockstrap_blocks_remove_gloabl_styles();setTimeout(function(){blockstrap_blocks_remove_gloabl_styles()},5e3)});